<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>影视剧人物关系编辑</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="/static/lib/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/app.css">
    <script src="/static/lib/jquery-1.11.2.min.js"></script>
  </head>

  <body>
    <div id="page-container">
      <h1>影视剧人物关系编辑</h1>
      <section id="app">
        <div id="mode-select" class="btn-group">
          <button class="btn btn-primary active" onclick="setAppMode(MODE.EDIT)">
            <i class="icon-pencil icon-white"></i> 编辑模式
          </button>
          <button class="btn btn-primary" onclick="setAppMode(MODE.EVAL)">
            <i class="icon-eye-open icon-white"></i> 预览模式
          </button>
        </div>
        <div id="model-link">
          <button class="btn btn-inverse" onclick="submmitGraph()">Link</button>
        </div>
        <div id="app-body">
          <div class="panel tab-content">
            <div id="edit-pane" class="tab-pane active">
              <div class="var-count">
                Number of propositional variables:
                <div class="btn-group">
                  <button class="btn" onclick="setVarCount(1)">1</button>
                  <button class="btn active" onclick="setVarCount(2)">2</button>
                  <button class="btn" onclick="setVarCount(3)">3</button>
                  <button class="btn" onclick="setVarCount(4)">4</button>
                  <button class="btn" onclick="setVarCount(5)">5</button>
                </div>
              </div>
              <div class="alert alert-info">
                <div class="selected-node-id">未选中任何东西</div>
                <table class="propvars inactive">
                  <tbody>
                    <tr class=""><td class="var-name">p:</td><td class="var-value"><div class="btn-group">
                      <input type="text" placeholder="e.g., (p -> []p)">
                    </div></td></tr>
                    <tr class=""><td class="var-name">q:</td><td class="var-value"><div class="btn-group">
                      <input type="text" placeholder="e.g., (p -> []p)">
                    </div></td></tr>
                    <tr class="inactive"><td class="var-name">r:</td><td class="var-value"><div class="btn-group">
                      <button class="btn btn-small btn-success" onclick="setVarForSelectedNode(2,true)">True</button>
                      <button class="btn btn-small btn-danger" onclick="setVarForSelectedNode(2,false)">False</button>
                    </div></td></tr>
                    <tr class="inactive"><td class="var-name">s:</td><td class="var-value"><div class="btn-group">
                      <button class="btn btn-small btn-success" onclick="setVarForSelectedNode(3,true)">True</button>
                      <button class="btn btn-small btn-danger" onclick="setVarForSelectedNode(3,false)">False</button>
                    </div></td></tr>
                    <tr class="inactive"><td class="var-name">t:</td><td class="var-value"><div class="btn-group">
                      <button class="btn btn-small btn-success" onclick="setVarForSelectedNode(4,true)">True</button>
                      <button class="btn btn-small btn-danger" onclick="setVarForSelectedNode(4,false)">False</button>
                    </div></td></tr>
                  </tbody>
                </table>
                <div id="model-submmit" class="inactive">
                  <button class="btn btn-success" onclick="updateNodeOrLink()">提交</button>
                </div>
              </div>
              <div class="instructions">
                <h3>Tips</h3>
                <ul class="unstyled">
                  <li><strong>添加一个人物</strong>：点击空白处</li>
                  <li><strong>添加一条关系</strong>：拖拽人物到另一个人物上</li>
                  <li><strong>移动人物</strong>：按住Ctrl再拖拽人物</li>
                  <li><strong>选中人物或关系</strong>：点击人物或关系</li>
                  <li>
                    选中人物或关系以后:
                    <ul>
                      <li><strong>Delete键</strong>：删除人物或关系</li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
            <div id="eval-pane" class="tab-pane">
              <div class="eval-input">
                Enter a formula:
                <input type="text" placeholder="e.g., (p -> []p)">
                <button class="btn btn-block" onclick="evaluateFormula()">Evaluate</button>
              </div>
              <div class="eval-output inactive">
              </div>
              <div class="instructions">
                <ul class="unstyled">
                  <li>
                    When entering a formula:
                    <ul>
                      <li>use <code>~A</code> for $\lnot{}A$</li>
                      <li>use <code>[]A</code> for $\Box{}A$</li>
                      <li>use <code>&lt;&gt;A</code> for $\Diamond{}A$</li>
                      <li>use <code>(A &amp; B)</code> for $(A\land{}B)$</li>
                      <li>use <code>(A | B)</code> for $(A\lor{}B)$</li>
                      <li>use <code>(A -&gt; B)</code> for $(A\rightarrow{}B)$</li>
                      <li>use <code>(A &lt;-&gt; B)</code> for $(A\leftrightarrow{}B)$</li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="graph"></div>
          <div class="current-formula inactive"></div>
        </div>
      </section>

      <footer>
        Modal Logic Playground is a creation of <a href="https://github.com/rkirsling">Ross Kirsling</a>, released under the <a href="http://opensource.org/licenses/mit-license.php">MIT License</a>.
      </footer>
    </div>
    <div class="modal-backdrop fade inactive" onclick="hideLinkDialog()"></div>
    <div id="link-dialog" class="modal fade inactive">
      <div class="modal-header">
        <button type="button" class="close" onclick="hideLinkDialog()">&times;</button>
        <h3>Link to Model</h3>
      </div>
      <div class="modal-body">
        <p>Copy the following URL to save your model for later or to share it with others:</p>
        <input type="text" value="" readonly onclick="this.select()">
      </div>
    </div>
  </body>

  <script src="/static/lib/d3.v3.min.js"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
  </script>
  <script src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
  <script src="/static/lib/formula-parser.min.js"></script>
  <script src="/static/js/MPL.js"></script>
  <script src="/static/js/app.js"></script>
</html>
